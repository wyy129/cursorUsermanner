# ğŸš€ Vercel éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®å·²ä¼˜åŒ–ä¸ºVerceléƒ¨ç½²ï¼Œä½¿ç”¨Serverless Functionså®ç°APIä»£ç†ã€‚

---

## âœ¨ ä¸ºä»€ä¹ˆé€‰æ‹©Vercelï¼Ÿ

- âœ… **å®Œå…¨å…è´¹** - ä¸ªäººé¡¹ç›®æ°¸ä¹…å…è´¹
- âœ… **æ— è¯·æ±‚é™åˆ¶** - å¯ä»¥æ­£å¸¸è®¿é—®Cursor API
- âœ… **æé€Ÿéƒ¨ç½²** - è‡ªåŠ¨æ„å»ºï¼Œç§’çº§éƒ¨ç½²
- âœ… **å…¨çƒCDN** - è®¿é—®é€Ÿåº¦å¿«
- âœ… **è‡ªåŠ¨HTTPS** - å…è´¹SSLè¯ä¹¦
- âœ… **é›¶é…ç½®** - å¼€ç®±å³ç”¨

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹æ³•1ï¼šé€šè¿‡Vercelç½‘ç«™ï¼ˆæ¨èï¼‰

1. **è®¿é—®** https://vercel.com
2. **æ³¨å†Œ/ç™»å½•** ï¼ˆå¯ç”¨GitHubè´¦å·ï¼‰
3. **ç‚¹å‡»** "Add New" â†’ "Project"
4. **å¯¼å…¥** ä½ çš„Gitä»“åº“
5. **éƒ¨ç½²** - Vercelè‡ªåŠ¨æ£€æµ‹é…ç½®å¹¶æ„å»º
6. **å®Œæˆ** - è·å¾— `https://your-app.vercel.app` åœ°å€

### æ–¹æ³•2ï¼šé€šè¿‡Vercel CLI

```bash
# 1. å®‰è£…Vercel CLI
npm i -g vercel

# 2. ç™»å½•
vercel login

# 3. éƒ¨ç½²
vercel

# 4. ç”Ÿäº§éƒ¨ç½²
vercel --prod
```

å°±è¿™ä¹ˆç®€å•ï¼ğŸ‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
cursor-user-manager/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ stripe.js          # Serverlesså‡½æ•°ï¼šä»£ç†Cursor API
â”‚   â””â”€â”€ health.js          # å¥åº·æ£€æŸ¥ç«¯ç‚¹
â”œâ”€â”€ src/                   # Vueæºä»£ç 
â”œâ”€â”€ dist/                  # æ„å»ºäº§ç‰©ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ vercel.json           # Vercelé…ç½®
â”œâ”€â”€ package.json          # ä¾èµ–é…ç½®
â””â”€â”€ vite.config.js        # Viteé…ç½®
```

---

## ğŸ”§ å·¥ä½œåŸç†

### APIä»£ç†æµç¨‹

```
æµè§ˆå™¨ 
  â†“ (å‰ç«¯è¯·æ±‚ /api/auth/stripe)
Vercel Serverless Function (api/stripe.js)
  â†“ (æœåŠ¡ç«¯è¯·æ±‚ï¼Œå¸¦Cookie)
Cursor API (https://www.cursor.com/api/auth/stripe)
  â†“ (è¿”å›æ•°æ®)
æµè§ˆå™¨
```

**å…³é”®ç‚¹ï¼š**
- å‰ç«¯è¯·æ±‚è‡ªå·±çš„åŸŸåï¼Œæ— CORSé—®é¢˜
- Serverlesså‡½æ•°åœ¨æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼Œæ— æµè§ˆå™¨é™åˆ¶
- å®Œç¾è§£å†³è·¨åŸŸé—®é¢˜ï¼

---

## ğŸ§ª éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥å¥åº·çŠ¶æ€

```bash
curl https://your-app.vercel.app/health
```

åº”è¿”å›ï¼š
```json
{
  "status": "ok",
  "message": "Cursor User Manager API is running on Vercel",
  "timestamp": "2025-10-06T...",
  "version": "2.0.0"
}
```

### 2. æµ‹è¯•APIä»£ç†

```bash
curl https://your-app.vercel.app/api/auth/stripe \
  -H "X-Cursor-Token: YOUR_TOKEN"
```

### 3. è®¿é—®å‰ç«¯

ç›´æ¥è®¿é—® `https://your-app.vercel.app` ä½¿ç”¨å®Œæ•´åŠŸèƒ½ï¼

---

## âš™ï¸ é…ç½®è¯´æ˜

### vercel.json

```json
{
  "routes": [
    {
      "src": "/api/auth/stripe",
      "dest": "/api/stripe.js"           // è·¯ç”±åˆ°Serverlesså‡½æ•°
    },
    {
      "src": "/health",
      "dest": "/api/health.js"
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"              // SPAè·¯ç”±æ”¯æŒ
    }
  ]
}
```

### ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€é…ç½®ç¯å¢ƒå˜é‡ï¼š

1. Vercelé¡¹ç›®é¡µé¢ â†’ Settings â†’ Environment Variables
2. æ·»åŠ å˜é‡ï¼ˆå¦‚APIå¯†é’¥ç­‰ï¼‰
3. åœ¨ä»£ç ä¸­é€šè¿‡ `process.env.VARIABLE_NAME` è®¿é—®

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

è¿æ¥Gitä»“åº“åï¼Œæ¯æ¬¡æ¨é€ä»£ç è‡ªåŠ¨éƒ¨ç½²ï¼š

```bash
git add .
git commit -m "Update feature"
git push
```

Vercelè‡ªåŠ¨ï¼š
1. æ£€æµ‹åˆ°æ¨é€
2. æ„å»ºé¡¹ç›®
3. éƒ¨ç½²æ–°ç‰ˆæœ¬
4. æ›´æ–°åŸŸå

### æ‰‹åŠ¨éƒ¨ç½²

```bash
vercel --prod
```

---

## ğŸŒ è‡ªå®šä¹‰åŸŸå

### æ·»åŠ è‡ªå®šä¹‰åŸŸå

1. Vercelé¡¹ç›®é¡µé¢ â†’ Settings â†’ Domains
2. æ·»åŠ ä½ çš„åŸŸåï¼ˆå¦‚ `cursor.yourdomain.com`ï¼‰
3. æŒ‰æç¤ºé…ç½®DNSï¼š
   ```
   Type: CNAME
   Name: cursor
   Value: cname.vercel-dns.com
   ```
4. ç­‰å¾…DNSç”Ÿæ•ˆï¼ˆå‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼‰
5. Vercelè‡ªåŠ¨é…ç½®HTTPS

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹æ—¥å¿—

1. Vercelé¡¹ç›®é¡µé¢ â†’ Deployments
2. ç‚¹å‡»ä»»ä¸€éƒ¨ç½² â†’ Logs
3. æŸ¥çœ‹å®æ—¶æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯

### æŸ¥çœ‹åˆ†æ

1. Vercelé¡¹ç›®é¡µé¢ â†’ Analytics
2. æŸ¥çœ‹è®¿é—®é‡ã€å“åº”æ—¶é—´ç­‰æŒ‡æ ‡

---

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### å·²ä¼˜åŒ–é¡¹

- âœ… **è¾¹ç¼˜ç¼“å­˜** - Vercelè‡ªåŠ¨CDNç¼“å­˜
- âœ… **ä»£ç åˆ†å‰²** - Viteè‡ªåŠ¨ä¼˜åŒ–
- âœ… **Gzipå‹ç¼©** - è‡ªåŠ¨å¯ç”¨
- âœ… **HTTP/2** - é»˜è®¤æ”¯æŒ
- âœ… **Serverless** - æŒ‰éœ€æ‰§è¡Œï¼Œé›¶æˆæœ¬

### å“åº”æ—¶é—´

- é™æ€èµ„æºï¼š< 50msï¼ˆCDNï¼‰
- APIä»£ç†ï¼š< 500msï¼ˆå–å†³äºCursor APIï¼‰
- é¦–æ¬¡åŠ è½½ï¼š< 1s

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### å…è´¹é¢åº¦ï¼ˆä¸ªäººï¼‰

- âœ… æ— é™é¡¹ç›®
- âœ… 100GBå¸¦å®½/æœˆ
- âœ… 100æ¬¡Serverlesså‡½æ•°è°ƒç”¨/å°æ—¶
- âœ… è‡ªåŠ¨HTTPS
- âœ… è‡ªå®šä¹‰åŸŸå

**å¯¹äºä¸ªäººä½¿ç”¨å®Œå…¨å…è´¹ï¼** ğŸ’š

### Proæ–¹æ¡ˆï¼ˆ$20/æœˆï¼‰

- æ›´é«˜å¸¦å®½é™åˆ¶
- æ›´å¤šå›¢é˜ŸåŠŸèƒ½
- ä¼˜å…ˆæ”¯æŒ

**ä¸ªäººé¡¹ç›®æ— éœ€å‡çº§ï¼**

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: éƒ¨ç½²å¤±è´¥ï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. `package.json` ä¸­çš„ä¾èµ–æ˜¯å¦å®Œæ•´
2. `vercel.json` è¯­æ³•æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹Vercelçš„æ„å»ºæ—¥å¿—

### Q: APIè¿”å›404ï¼Ÿ

**A:** ç¡®ä¿ï¼š
1. `api/stripe.js` æ–‡ä»¶å­˜åœ¨
2. `vercel.json` ä¸­çš„è·¯ç”±é…ç½®æ­£ç¡®
3. é‡æ–°éƒ¨ç½²ï¼š`vercel --prod`

### Q: CORSé”™è¯¯ï¼Ÿ

**A:** Serverlesså‡½æ•°å·²è®¾ç½®CORSå¤´ï¼Œä¸åº”è¯¥æœ‰é—®é¢˜ã€‚å¦‚æœé‡åˆ°ï¼š
1. æ£€æŸ¥ `api/stripe.js` ä¸­çš„CORSè®¾ç½®
2. ç¡®ä¿å‰ç«¯è¯·æ±‚ç›¸å¯¹è·¯å¾„ `/api/auth/stripe`

### Q: è¶…æ—¶ï¼Ÿ

**A:** Vercel Serverlesså‡½æ•°é»˜è®¤10ç§’è¶…æ—¶ï¼ˆå…è´¹ç‰ˆï¼‰ï¼š
- é€šå¸¸è¶³å¤ŸCursor APIå“åº”
- å¦‚è¶…æ—¶ï¼Œæ£€æŸ¥Tokenæ˜¯å¦æœ‰æ•ˆ
- Proç‰ˆå¯é…ç½®æ›´é•¿è¶…æ—¶

---

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. ç¯å¢ƒå˜é‡

æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨Vercelç¯å¢ƒå˜é‡ä¸­ï¼Œä¸è¦æäº¤åˆ°ä»£ç ï¼š

```javascript
// api/stripe.js
const API_KEY = process.env.API_KEY;
```

### 2. é€Ÿç‡é™åˆ¶

å¯æ·»åŠ é€Ÿç‡é™åˆ¶é˜²æ­¢æ»¥ç”¨ï¼š

```javascript
// api/stripe.js
import rateLimit from 'express-rate-limit';
```

### 3. TokenéªŒè¯

åœ¨Serverlesså‡½æ•°ä¸­éªŒè¯Tokenæ ¼å¼ï¼š

```javascript
if (!token || !token.startsWith('user_')) {
  return res.status(400).json({ error: 'Invalid token format' });
}
```

---

## ğŸ‰ éƒ¨ç½²å®Œæˆæ¸…å•

- [ ] Vercelè´¦å·å·²åˆ›å»º
- [ ] é¡¹ç›®å·²æˆåŠŸéƒ¨ç½²
- [ ] `/health` ç«¯ç‚¹è¿”å›æ­£å¸¸
- [ ] APIä»£ç†åŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯é¡µé¢å¯ä»¥è®¿é—®
- [ ] æ•°æ®å¯¼å…¥åŠŸèƒ½æ­£å¸¸
- [ ] Cursor APIæŸ¥è¯¢æˆåŠŸ
- [ ] ï¼ˆå¯é€‰ï¼‰è‡ªå®šä¹‰åŸŸåå·²é…ç½®

---

## ğŸ“š ç›¸å…³èµ„æº

- [Vercelå®˜æ–¹æ–‡æ¡£](https://vercel.com/docs)
- [Serverless FunctionsæŒ‡å—](https://vercel.com/docs/functions/serverless-functions)
- [Vercel CLIæ–‡æ¡£](https://vercel.com/docs/cli)

---

**ç°åœ¨å°±éƒ¨ç½²åˆ°Vercelï¼Œäº«å—å®Œæ•´åŠŸèƒ½ï¼** ğŸš€

```bash
vercel --prod
```

